<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Circulo unitario</title>
    
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Playfair+Display:wght@700&family=Open+Sans:wght@400;600;700&display=swap');

        * { touch-action: manipulation; box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
        
        body { 
            background: #ffffff; margin: 0; padding: 20px; 
            font-family: 'Open Sans', sans-serif; display: flex; justify-content: center; color: #333;
        }

        .container { 
            width: 100%; max-width: 1200px; background: #F2F2F2; padding: 40px 20px; 
            border-radius: 50px; box-shadow: 0 20px 60px rgba(0,0,0,0.05); text-align: center;
        }

        .header { margin-bottom: 25px; }
        .header h1 { font-family: 'Playfair Display', serif; font-size: 34px; margin: 0; }
        .header p { font-family: 'Playfair Display', serif; font-size: 18px; color: #666; margin-top: 5px; font-weight: 700; }

        .mode-selector {
            display: inline-flex; flex-wrap: wrap; justify-content: center; background: #eee; padding: 5px; border-radius: 30px; 
            margin-bottom: 25px; gap: 5px; border: 1px solid #ddd;
        }
        .pill {
            padding: 10px 16px; border-radius: 25px; cursor: pointer; font-size: 11px;
            font-weight: 700; transition: 0.3s; color: #888; text-transform: uppercase; border: 1px solid transparent;
        }
        .pill.active { border: 1px solid rgba(0,0,0,0.1); color: #fff; box-shadow: 0 2px 5px rgba(0,0,0,0.2); }
        
        /* COLORES Y TARJETAS */
        .sin.active, .item-sin { background-color: #FF2D55; } 
        .cos.active, .item-cos { background-color: #007AFF; } 
        .tan.active, .item-tan { background-color: #FF9500; } 
        .csc.active, .item-csc { background-color: #28CD41; } 
        .sec.active, .item-sec { background-color: #fcdcf0; } /* Color Secante Solicitado */
        .cot.active, .item-cot { background-color: #5AC8FA; } 
        
        /* Ajuste de texto para Secante (color claro) */
        .item-sec { color: #555 !important; }
        .item-sec .data-label, .item-sec .data-value, .item-sec .data-exact { color: #333 !important; }

        .pill.active { color: #fff !important; }

        .main-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; align-items: center; }
        @media (max-width: 950px) { .main-grid { grid-template-columns: 1fr; } }

        .canvas-card {
            background: white; border-radius: 35px; padding: 25px; position: relative;
            border: 1px solid #ddd; display: flex; flex-direction: column; align-items: center;
        }
        canvas { max-width: 100%; height: auto; z-index: 1; cursor: crosshair; }

        .data-panel {
            display: grid; grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
            gap: 15px; margin-top: 30px;
        }
        .data-item {
            padding: 15px; border-radius: 22px;
            display: flex; flex-direction: column; justify-content: center; min-height: 100px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.08);
            color: white;
        }
        .item-angle { background: white; border: 1px solid #ddd; color: #333; }
        .item-angle .data-label { color: #aaa; }
        .item-angle .data-value { color: #000; }
        .item-angle .data-exact { color: #555; }

        .data-label { font-size: 11px; font-weight: 700; color: rgba(255,255,255,0.9); text-transform: uppercase; margin-bottom: 5px; }
        .data-value { font-size: 20px; font-weight: 700; }
        .data-exact { font-size: 15px; font-weight: 600; margin-top: 4px; color: rgba(255,255,255,0.85); }
    </style>
</head>
<body>

<div class="container">
    <div class="header">
        <h1>Circulo unitario</h1>
        <p>√(Raíz) Cuadrada²</p>
    </div>

    <div class="mode-selector" id="pills-container"></div>

    <div class="main-grid">
        <div class="canvas-card">
            <canvas id="circleCanvas" width="500" height="500"></canvas>
        </div>
        <div class="canvas-card">
            <canvas id="graphCanvas" width="500" height="500"></canvas>
        </div>
    </div>

    <div class="data-panel">
        <div class="data-item item-angle">
            <div class="data-label">Ángulo</div>
            <div class="data-value" id="val-angle">0.0°</div>
            <div class="data-exact" id="exact-angle">0 rad</div>
        </div>
        <div class="data-item item-sin"><div class="data-label">Seno</div><div class="data-value" id="val-sin">0.000</div><div class="data-exact" id="exact-sin"></div></div>
        <div class="data-item item-cos"><div class="data-label">Coseno</div><div class="data-value" id="val-cos">1.000</div><div class="data-exact" id="exact-cos"></div></div>
        <div class="data-item item-tan"><div class="data-label">Tangente</div><div class="data-value" id="val-tan">0.000</div><div class="data-exact" id="exact-tan"></div></div>
        <div class="data-item item-csc"><div class="data-label">Cosecante</div><div class="data-value" id="val-csc">∞</div><div class="data-exact" id="exact-csc"></div></div>
        <div class="data-item item-sec"><div class="data-label">Secante</div><div class="data-value" id="val-sec">1.000</div><div class="data-exact" id="exact-sec"></div></div>
        <div class="data-item item-cot"><div class="data-label">Cotangente</div><div class="data-value" id="val-cot">∞</div><div class="data-exact" id="exact-cot"></div></div>
    </div>
</div>

<script>
    const circleCanvas = document.getElementById('circleCanvas');
    const circleCtx = circleCanvas.getContext('2d');
    const graphCanvas = document.getElementById('graphCanvas');
    const graphCtx = graphCanvas.getContext('2d');

    let currentAngle = 0; 
    let isDragging = false;
    let mode = 'sin';
    const allFuncs = ['sin', 'cos', 'tan', 'csc', 'sec', 'cot'];
    const colors = { sin:'#FF2D55', cos:'#007AFF', tan:'#FF9500', csc:'#28CD41', sec:'#fcdcf0', cot:'#5AC8FA' };

    const exactValues = {
        0:   { sin:'0', cos:'1', tan:'0', csc:'∞', sec:'1', cot:'∞' },
        30:  { sin:'1/2', cos:'√3/2', tan:'√3/3', csc:'2', sec:'2√3/3', cot:'√3' },
        45:  { sin:'√2/2', cos:'√2/2', tan:'1', csc:'√2', sec:'√2', cot:'1' },
        60:  { sin:'√3/2', cos:'1/2', tan:'√3', csc:'2√3/3', sec:'2', cot:'√3/3' },
        90:  { sin:'1', cos:'0', tan:'∞', csc:'1', sec:'∞', cot:'0' },
        180: { sin:'0', cos:'-1', tan:'0', csc:'∞', sec:'-1', cot:'∞' },
        270: { sin:'-1', cos:'0', tan:'∞', csc:'-1', sec:'∞', cot:'0' }
    };

    function renderPills() {
        const container = document.getElementById('pills-container');
        container.innerHTML = '';
        allFuncs.forEach(f => {
            const p = document.createElement('div');
            p.className = `pill ${f} ${mode === f ? 'active' : ''}`;
            p.innerText = f.toUpperCase();
            p.onclick = () => { mode = f; renderPills(); drawAll(); };
            container.appendChild(p);
        });
    }

    function drawAll() { drawCircle(); drawGraph(); updateText(); }

    function drawCircle() {
        const cx = 250, cy = 250, r = 160;
        circleCtx.clearRect(0, 0, 500, 500);

        // Fondo y Ejes
        circleCtx.strokeStyle = '#f0f0f0'; circleCtx.lineWidth = 2;
        circleCtx.beginPath(); circleCtx.moveTo(0, cy); circleCtx.lineTo(500, cy); circleCtx.moveTo(cx, 0); circleCtx.lineTo(cx, 500); circleCtx.stroke();
        
        circleCtx.font = '700 12px "Open Sans"'; circleCtx.fillStyle = '#999';
        circleCtx.textAlign = 'left'; circleCtx.fillText('1', cx + r + 5, cy + 4);
        circleCtx.textAlign = 'right'; circleCtx.fillText('-1', cx - r - 5, cy + 4);
        circleCtx.textAlign = 'center'; circleCtx.fillText('1', cx, cy - r - 5); circleCtx.fillText('-1', cx, cy + r + 15);

        circleCtx.strokeStyle = '#333'; circleCtx.lineWidth = 2;
        circleCtx.beginPath(); circleCtx.arc(cx, cy, r, 0, Math.PI * 2); circleCtx.stroke();

        const x = cx + r * Math.cos(currentAngle);
        const y = cy - r * Math.sin(currentAngle);
        const sinV = Math.sin(currentAngle), cosV = Math.cos(currentAngle);

        //---ANGULOS---//
        // Definimos los ángulos que queremos mostrar
const gradosAMostrar = [0, 30, 45, 60, 90, 120, 135, 150, 180, 210, 225, 240, 270, 300, 315, 330];

gradosAMostrar.forEach(deg => {
    const rad = deg * Math.PI / 180; // Convertimos a radianes
    const offset = 25; // Distancia desde el borde del círculo
    
    // Calculamos la posición (x, y) sumando el offset al radio
    const lx = cx + (r + offset) * Math.cos(rad);
    const ly = cy - (r + offset) * Math.sin(rad);

    circleCtx.font = '600 11px "Open Sans"';
    circleCtx.fillStyle = '#999'; // Un gris suave para no saturar
    circleCtx.textAlign = 'center';
    circleCtx.textBaseline = 'middle';
    circleCtx.fillText(deg + '°', lx, ly);
});

        // --- DIBUJO CON ORDEN DE CAPAS ---
        
        if (Math.abs(sinV) > 0.001 && Math.abs(cosV) > 0.001) {
            const tanV = Math.tan(currentAngle), cotV = 1/tanV, secV = 1/cosV, cscV = 1/sinV;
            const tanX = cx + r, tanY = cy - r * tanV;
            const cotX = cx + r * cotV, cotY = cy - (sinV >= 0 ? r : -r);
            const secX = cx + r * secV, cscY = cy - r * cscV;

            // 1. Lineas punteadas para todas las identidades
            circleCtx.setLineDash([5, 5]); circleCtx.lineWidth = 2;
            
            circleCtx.strokeStyle = colors.sin; circleCtx.beginPath(); circleCtx.moveTo(x, y); circleCtx.lineTo(cx, y); circleCtx.stroke();
            circleCtx.strokeStyle = colors.cos; circleCtx.beginPath(); circleCtx.moveTo(x, y); circleCtx.lineTo(x, cy); circleCtx.stroke();
            circleCtx.strokeStyle = colors.tan; circleCtx.beginPath(); circleCtx.moveTo(cx, cy); circleCtx.lineTo(tanX, tanY); circleCtx.stroke();
            circleCtx.strokeStyle = colors.cot; circleCtx.beginPath(); circleCtx.moveTo(cx, cy); circleCtx.lineTo(cotX, cotY); circleCtx.stroke();
            circleCtx.strokeStyle = colors.sec; circleCtx.beginPath(); circleCtx.moveTo(x, y); circleCtx.lineTo(secX, cy); circleCtx.stroke();
            circleCtx.strokeStyle = colors.csc; circleCtx.beginPath(); circleCtx.moveTo(x, y); circleCtx.lineTo(cx, cscY); circleCtx.stroke();
            
            circleCtx.setLineDash([]);

            // 2. Dibujo de segmentos (Secante se dibuja antes que Coseno)
            circleCtx.lineWidth = 4;
            circleCtx.strokeStyle = colors.sec; circleCtx.beginPath(); circleCtx.moveTo(cx, cy); circleCtx.lineTo(secX, cy); circleCtx.stroke();
            circleCtx.strokeStyle = colors.csc; circleCtx.beginPath(); circleCtx.moveTo(cx, cy); circleCtx.lineTo(cx, cscY); circleCtx.stroke();
            circleCtx.strokeStyle = colors.tan; circleCtx.beginPath(); circleCtx.moveTo(tanX, cy); circleCtx.lineTo(tanX, tanY); circleCtx.stroke();
            circleCtx.strokeStyle = colors.cot; circleCtx.beginPath(); circleCtx.moveTo(cx, cotY); circleCtx.lineTo(cotX, cotY); circleCtx.stroke();
        }

        // 3. Seno y Coseno (Más anchos y encima de todo)
        circleCtx.lineWidth = 7;
        circleCtx.strokeStyle = colors.cos; circleCtx.beginPath(); circleCtx.moveTo(cx, cy); circleCtx.lineTo(x, cy); circleCtx.stroke();
        circleCtx.strokeStyle = colors.sin; circleCtx.beginPath(); circleCtx.moveTo(x, cy); circleCtx.lineTo(x, y); circleCtx.stroke();

        // Radio y Punto
        circleCtx.strokeStyle = '#333'; circleCtx.lineWidth = 2;
        circleCtx.beginPath(); circleCtx.moveTo(cx, cy); circleCtx.lineTo(x, y); circleCtx.stroke();
        circleCtx.fillStyle = '#fff'; circleCtx.beginPath(); circleCtx.arc(x, y, 8, 0, Math.PI * 2); circleCtx.fill();
        circleCtx.strokeStyle = '#333'; circleCtx.lineWidth = 3; circleCtx.stroke();
    }

    function drawGraph() {
        const w = 500, h = 500, midY = h / 2, amp = 120;
        graphCtx.clearRect(0, 0, 500, 500);
        const fns = { sin: Math.sin, cos: Math.cos, tan: Math.tan, csc: a => 1/Math.sin(a), sec: a => 1/Math.cos(a), cot: a => 1/Math.tan(a) };

        graphCtx.strokeStyle = '#eee'; graphCtx.lineWidth = 2;
        graphCtx.beginPath(); graphCtx.moveTo(50, 0); graphCtx.lineTo(50, h); graphCtx.moveTo(0, midY); graphCtx.lineTo(w, midY); graphCtx.stroke();

        graphCtx.fillStyle = '#999'; graphCtx.font = '700 11px "Open Sans"';
        graphCtx.textAlign = 'right'; graphCtx.fillText('1', 45, midY - amp + 4); graphCtx.fillText('-1', 45, midY + amp + 4);
        
        graphCtx.strokeStyle = colors[mode]; graphCtx.lineWidth = 3;
        graphCtx.beginPath();
        for(let i = 0; i <= 400; i++) {
            const a = (i / 400) * Math.PI * 2;
            let v = fns[mode](a);
            if(Math.abs(v) > 15) v = v > 0 ? 15 : -15; 
            const py = midY - v * amp;
            if (['tan','csc','sec','cot'].includes(mode) && Math.abs(fns[mode](a)) > 10 && i > 0) { graphCtx.stroke(); graphCtx.beginPath(); }
            else { if(i === 0) graphCtx.moveTo(50+i, py); else graphCtx.lineTo(50+i, py); }
        }
        graphCtx.stroke();

        let n = currentAngle % (Math.PI * 2); if(n < 0) n += Math.PI * 2;
        let vm = fns[mode](n);
        if(Math.abs(vm) < 10) {
            const mx = 50 + (n / (Math.PI * 2)) * 400, my = midY - vm * amp;
            graphCtx.fillStyle = colors[mode]; graphCtx.beginPath(); graphCtx.arc(mx, my, 7, 0, Math.PI * 2); graphCtx.fill();
            graphCtx.strokeStyle = '#fff'; graphCtx.lineWidth = 2; graphCtx.stroke();
        }

        ---- VALORES GRAFICA ----
        const etiquetasPi = [
    { x: 50,  texto: '0' },
    { x: 150, texto: 'π/2' },
    { x: 250, texto: 'π' },
    { x: 350, texto: '3π/2' },
    { x: 450, texto: '2π' }
];

graphCtx.fillStyle = '#999';
graphCtx.font = '700 12px "Open Sans"';
graphCtx.textAlign = 'center';

etiquetasPi.forEach(label => {
    // Dibujamos el texto debajo del eje central
    graphCtx.fillText(label.texto, label.x, midY + 25);
    
    // Opcional: Una pequeña marquita (tick) en el eje
    graphCtx.beginPath();
    graphCtx.moveTo(label.x, midY - 5);
    graphCtx.lineTo(label.x, midY + 5);
    graphCtx.strokeStyle = '#ddd';
    graphCtx.stroke();
});
    }

    function updateText() {
        let n = currentAngle % (Math.PI * 2); if(n < 0) n += Math.PI * 2;
        let deg = Math.round(n * 180 / Math.PI);
        document.getElementById('val-angle').innerText = (n * 180 / Math.PI).toFixed(1) + '°';
        document.getElementById('exact-angle').innerText = (n / Math.PI).toFixed(2) + 'π rad';
        const vs = { sin: Math.sin(n), cos: Math.cos(n), tan: Math.tan(n), csc: 1/Math.sin(n), sec: 1/Math.cos(n), cot: 1/Math.tan(n) };
        allFuncs.forEach(f => {
            document.getElementById(`val-${f}`).innerText = Math.abs(vs[f]) > 50 ? '∞' : vs[f].toFixed(3);
            const ex = exactValues[deg % 360] || exactValues[360 - (deg % 360)];
            document.getElementById(`exact-${f}`).innerText = ex ? ex[f] : '';
        });
    }

    function handle(e) {
        const rect = circleCanvas.getBoundingClientRect();
        const clientX = e.touches ? e.touches[0].clientX : e.clientX;
        const clientY = e.touches ? e.touches[0].clientY : e.clientY;
        let x = (clientX - rect.left) * (500 / rect.width) - 250;
        let y = 250 - (clientY - rect.top) * (500 / rect.height);
        let ang = Math.atan2(y, x);
        let deg = ang * 180 / Math.PI; if(deg < 0) deg += 360;
        const notables = [0, 30, 45, 60, 90, 120, 135, 150, 180, 210, 225, 240, 270, 300, 315, 330, 360];
        for(let nt of notables) {
            if(Math.abs(deg - nt) < 2.5) { ang = nt * Math.PI / 180; break; }
        }
        currentAngle = ang; drawAll();
    }

    circleCanvas.addEventListener('mousedown', () => isDragging = true);
    window.addEventListener('mouseup', () => isDragging = false);
    window.addEventListener('mousemove', (e) => isDragging && handle(e));
    circleCanvas.addEventListener('touchstart', (e) => { isDragging = true; handle(e); });
    circleCanvas.addEventListener('touchmove', (e) => { isDragging && handle(e); e.preventDefault(); }, {passive: false});

    renderPills(); drawAll();
</script>
</body>
</html>
