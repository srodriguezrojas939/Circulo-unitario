<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Estación Trigonométrica Pro</title>
    <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js" async></script>

    <style>
        /* Importación de fuentes */
        @import url('https://fonts.googleapis.com/css2?family=Playfair+Display:wght@700&family=Open+Sans:wght@400;600;700&display=swap');

        /* Reset y estilos base */
        * { touch-action: manipulation; box-sizing: border-box; }
        
        body { 
            background: #fff; 
            margin: 0; 
            padding: 20px; 
            font-family: 'Open Sans', sans-serif; /* Open Sans para todo el cuerpo */
            display: flex; 
            justify-content: center;
            color: #333;
            text-align: center; /* Centrado general */
        }

        .container { 
            width: 100%; 
            max-width: 600px; 
            background: #F2F2F2; 
            padding: 30px 20px; 
            border-radius: 40px; 
            box-shadow: 0 15px 50px rgba(0,0,0,0.08);
        }

        /* Estilos específicos para títulos */
        .header h1 { font-family: 'Playfair Display', serif; font-size: 32px; margin: 0; font-weight: 700; }
        .header p { font-family: 'Playfair Display', serif; font-size: 18px; color: #666; margin-top: 5px; font-weight: 700; }

        /* Contenedor del Círculo Unitario */
        #canvas-container {
            background: white;
            border-radius: 35px;
            margin-top: 30px;
            position: relative;
            width: 100%;
            aspect-ratio: 1 / 1;
            display: flex;
            align-items: center;
            justify-content: center;
            touch-action: none;
            box-shadow: inset 0 0 20px rgba(0,0,0,0.03);
        }

        canvas { width: 95%; height: 95%; display: block; }

        /* Etiquetas de Cuadrantes */
        .quadrant-label {
            position: absolute;
            font-size: 40px;
            font-weight: 700;
            color: #f0f0f0;
            user-select: none;
            pointer-events: none;
            font-family: 'Open Sans', sans-serif;
        }
        .q1 { top: 20px; right: 25px; }
        .q2 { top: 20px; left: 25px; }
        .q3 { bottom: 20px; left: 25px; }
        .q4 { bottom: 20px; right: 25px; }

        /* Panel de Datos */
        .data-panel {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin-top: 30px;
        }

        .data-item {
            background: white;
            padding: 20px;
            border-radius: 25px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.03);
        }

        .full-width { grid-column: 1 / -1; }

        .data-label { font-size: 11px; font-weight: 700; color: #aaa; text-transform: uppercase; letter-spacing: 1px; font-family: 'Open Sans', sans-serif; }
        .data-value { font-size: 20px; font-weight: 700; color: #000; margin-top: 5px; font-family: 'Open Sans', sans-serif; }

        /* Colores consistentes */
        .color-cos { color: #007AFF; }
        .color-sin { color: #FF2D55; }

        /* Contenedor de Gráficas */
        .graphs-container {
            margin-top: 30px;
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        .graph-box {
            background: white;
            border-radius: 30px;
            padding: 20px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.05);
            position: relative;
        }
        
        .graph-title {
            position: absolute;
            top: 10px;
            left: 20px;
            font-size: 12px;
            font-weight: 700;
            font-family: 'Open Sans', sans-serif;
        }

        .graph-canvas {
            width: 100%;
            height: 150px;
            display: block;
        }
    </style>
</head>
<body>

<div class="container">
    <div class="header">
        <h1>Círculo Unitario</h1>
        <p>√(Raíz) Cuadrada²</p>
    </div>

    <div id="canvas-container">
        <canvas id="unitCircle" width="600" height="600"></canvas>
        <div class="quadrant-label q1">I</div>
        <div class="quadrant-label q2">II</div>
        <div class="quadrant-label q3">III</div>
        <div class="quadrant-label q4">IV</div>
    </div>

    <div class="data-panel">
        <div class="data-item full-width">
            <div class="data-label">Ángulo Actual</div>
            <div class="data-value" id="val-angle">0°</div>
            <div id="val-rads" style="font-size: 15px; color: #888; font-weight: 600; margin-top: 5px;">0 rad | 0π</div>
        </div>

        <div class="data-item">
            <div class="data-label color-cos">Coseno (x)</div>
            <div class="data-value" id="val-cos">1.000</div>
        </div>

        <div class="data-item">
            <div class="data-label color-sin">Seno (y)</div>
            <div class="data-value" id="val-sin">0.000</div>
        </div>
    </div>

    <div class="graphs-container">
        <div class="graph-box">
            <div class="graph-title color-sin">Función Seno</div>
            <canvas id="sineGraph" class="graph-canvas" width="600" height="200"></canvas>
        </div>
        <div class="graph-box">
            <div class="graph-title color-cos">Función Coseno</div>
            <canvas id="cosineGraph" class="graph-canvas" width="600" height="200"></canvas>
        </div>
    </div>
</div>

<script>
    // --- Configuración General ---
    const circleCanvas = document.getElementById('unitCircle');
    const circleCtx = circleCanvas.getContext('2d');
    const sineCanvas = document.getElementById('sineGraph');
    const sineCtx = sineCanvas.getContext('2d');
    const cosineCanvas = document.getElementById('cosineGraph');
    const cosineCtx = cosineCanvas.getContext('2d');

    const centerX = 300, centerY = 300, radius = 240;
    let isDragging = false;
    let currentAngle = 0; // Radianes

    // --- Funciones de Dibujo ---

    // Dibuja todo el conjunto
    function drawAll() {
        drawUnitCircle();
        drawGraph(sineCtx, Math.sin, '#FF2D55');
        drawGraph(cosineCtx, Math.cos, '#007AFF');
        updateData(currentAngle);
    }

    // 1. Círculo Unitario Principal
    function drawUnitCircle() {
        circleCtx.clearRect(0, 0, 600, 600);

        // Ejes y Círculo
        circleCtx.strokeStyle = '#eee'; circleCtx.lineWidth = 2;
        circleCtx.beginPath(); circleCtx.moveTo(0, centerY); circleCtx.lineTo(600, centerY); circleCtx.moveTo(centerX, 0); circleCtx.lineTo(centerX, 600); circleCtx.stroke();
        circleCtx.strokeStyle = '#333'; circleCtx.lineWidth = 4;
        circleCtx.beginPath(); circleCtx.arc(centerX, centerY, radius, 0, Math.PI * 2); circleCtx.stroke();

        // Etiquetas de Ángulos Importantes
        circleCtx.fillStyle = '#aaa'; circleCtx.font = '700 12px "Open Sans"'; circleCtx.textAlign = 'center'; circleCtx.textBaseline = 'middle';
        const importantAngles = [0, 30, 45, 60, 90, 120, 135, 150, 180, 210, 225, 240, 270, 300, 315, 330];
        importantAngles.forEach(deg => {
            const rad = deg * Math.PI / 180;
            const x = centerX + (radius + 25) * Math.cos(rad);
            const y = centerY - (radius + 25) * Math.sin(rad);
            circleCtx.fillText(deg + '°', x, y);
            
            // Pequeña marca en el círculo
            const markX = centerX + radius * Math.cos(rad);
            const markY = centerY - radius * Math.sin(rad);
            circleCtx.beginPath(); circleCtx.arc(markX, markY, 3, 0, Math.PI*2); circleCtx.fill();
        });

        // Proyecciones y Punto Actual
        const x = centerX + radius * Math.cos(currentAngle);
        const y = centerY - radius * Math.sin(currentAngle);
        circleCtx.setLineDash([8, 8]); circleCtx.strokeStyle = '#ccc'; circleCtx.lineWidth = 2;
        circleCtx.beginPath(); circleCtx.moveTo(centerX, centerY); circleCtx.lineTo(x, y); circleCtx.stroke(); circleCtx.setLineDash([]);
        
        circleCtx.strokeStyle = '#007AFF'; circleCtx.lineWidth = 6; circleCtx.beginPath(); circleCtx.moveTo(centerX, centerY); circleCtx.lineTo(x, centerY); circleCtx.stroke(); // Cos
        circleCtx.strokeStyle = '#FF2D55'; circleCtx.lineWidth = 6; circleCtx.beginPath(); circleCtx.moveTo(x, centerY); circleCtx.lineTo(x, y); circleCtx.stroke(); // Sen

        circleCtx.fillStyle = '#000'; circleCtx.beginPath(); circleCtx.arc(x, y, 12, 0, Math.PI * 2); circleCtx.fill();
        circleCtx.strokeStyle = '#fff'; circleCtx.lineWidth = 3; circleCtx.stroke();
    }

    // 2. Gráficas de Funciones (Seno y Coseno)
    function drawGraph(ctx, func, color) {
        const width = ctx.canvas.width;
        const height = ctx.canvas.height;
        const midY = height / 2;
        const scaleX = width / (2 * Math.PI); // 0 a 2PI en el ancho
        const scaleY = (height / 2) * 0.8; // Amplitud

        ctx.clearRect(0, 0, width, height);

        // Eje central
        ctx.strokeStyle = '#eee'; ctx.lineWidth = 2;
        ctx.beginPath(); ctx.moveTo(0, midY); ctx.lineTo(width, midY); ctx.stroke();

        // Curva de la función
        ctx.strokeStyle = color; ctx.lineWidth = 4; ctx.beginPath();
        for (let i = 0; i <= width; i++) {
            const angle = i / scaleX;
            const y = midY - func(angle) * scaleY;
            if (i === 0) ctx.moveTo(i, y); else ctx.lineTo(i, y);
        }
        ctx.stroke();

        // Marcador del ángulo actual
        let normalizedAngle = currentAngle % (2 * Math.PI);
        if (normalizedAngle < 0) normalizedAngle += 2 * Math.PI;
        
        const markerX = normalizedAngle * scaleX;
        const markerY = midY - func(normalizedAngle) * scaleY;

        ctx.fillStyle = color; ctx.beginPath(); ctx.arc(markerX, markerY, 8, 0, Math.PI * 2); ctx.fill();
        ctx.strokeStyle = '#fff'; ctx.lineWidth = 2; ctx.stroke();
        
        // Línea guía vertical
        ctx.setLineDash([5, 5]); ctx.strokeStyle = color; ctx.lineWidth = 1;
        ctx.beginPath(); ctx.moveTo(markerX, midY); ctx.lineTo(markerX, markerY); ctx.stroke(); ctx.setLineDash([]);
    }

    // --- Lógica de Interacción y Datos ---
    function updateData(rad) {
        let n = rad % (Math.PI * 2);
        if (n < 0) n += Math.PI * 2;
        
        document.getElementById('val-angle').innerText = `${(n * 180 / Math.PI).toFixed(1)}°`;
        document.getElementById('val-rads').innerText = `${n.toFixed(2)} rad | ${(n / Math.PI).toFixed(2)}π`;
        document.getElementById('val-cos').innerText = Math.cos(n).toFixed(3);
        document.getElementById('val-sin').innerText = Math.sin(n).toFixed(3);
    }

    function handle(e) {
        const rect = circleCanvas.getBoundingClientRect();
        const clientX = e.touches ? e.touches[0].clientX : e.clientX;
        const clientY = e.touches ? e.touches[0].clientY : e.clientY;
        const x = (clientX - rect.left) * (600 / rect.width);
        const y = (clientY - rect.top) * (600 / rect.height);
        currentAngle = Math.atan2(centerY - y, x - centerX);
        drawAll();
    }

    // Event Listeners
    circleCanvas.addEventListener('mousedown', () => isDragging = true);
    window.addEventListener('mouseup', () => isDragging = false);
    window.addEventListener('mousemove', (e) => isDragging && handle(e));
    circleCanvas.addEventListener('touchstart', (e) => { isDragging = true; handle(e); });
    circleCanvas.addEventListener('touchmove', (e) => { isDragging && handle(e); e.preventDefault(); }, {passive: false});
    circleCanvas.addEventListener('touchend', () => isDragging = false);

    // Inicio
    drawAll();
</script>
</body>
</html>
